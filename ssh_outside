먼저, local 상 접속이 가능해야 된다.

local 접속을 하기 위한 방법은 https://github.com/ansejoon1117/Linux/blob/main/ssh_local

PC.A와 PC.B가 있다고 가정하고, PC.A가 서버로 사용하기 위한 컴퓨터 즉, 위에서 local 접속을 마친 컴퓨터.
PC.B는 단순히 Putty를 통해 접속을 하려는 컴퓨터.

외부에서 접속하려면, 총 4가지 방법을 거쳐야 된다.

1. 공인 IP 주소 확인
2. 포트 포워딩 설정
3. PC.A의 방화벽 설정
4. VMware Ubuntu의 방화벽 설정

< 1. 공인 IP 주소 확인 >
  local 상에서 적은 IP는 외부에서 볼 수 없는 IP이다.

  그러기에 외부에서 볼 수 있는 공인 IP 주소가 필요한데, 이는 네이버에서 "내 아이피"라고만 검색하면 나온다.

    공인 IP란? 인터넷에 접속할 수 있는 권한을 가진 IP. 사설 IP와 반대되는 개념.
    사설 IP란? 특정 기관 등에서 내부 네트워크용으로 임의로 만든 IP. (흔히, 192.168.1.x)
      예를 들어, 우리가 쉽게 접속할 수 있는 네이버는 공인 IP이고, 사용자가 local 상에서 만든 웹이나 앱은 외부에서 접속할 수 없으므로 사설 IP이다.

  집에 있는 공유기와 Wifi 연결은 연결 해제 될 위험성이 있어, C-to-LAN, USB-to-LAN 을 이용해서 연결하였다.

< 2. 포트 포워딩 설정 >
  포트 포워딩이란? [외부 아이피:외부 포트번호]와 [내부 아이피:내부 포트번호]를 연결해주는 기능이다.
  즉, 간단히 말해서 포트(Port)를 전달(Forwarding)해 주는 거라고 생각하면 된다.
    먼저, PC.A의 cmd 창에서 ipconfig 명령어를 통해 기본 게이트웨이를 알아야 된다.
    192.168.35.1이라는 기본 게이트웨이 주소를 알았고 접속을 하면 각 공유기를 설정할 수 있는 창으로 접속된다.
    공유기의 로그인과 비밀번호 초깃값이 각 제조사마다 다르기 때문에 찾아서 로그인을 진행한다.
    
        [포트포워딩 설정]
          외부 포트 범위는 PC.B에 Putty에서 입력할 포트
          내부 IP 주소는 앞서 알았던 [VMware Ubuntu 에서 확인한 IP]
          내부 포트는 SSH의 기본 포트인 22
	
        위와 같이 설정하고 적용을 위해 시스템 재시작을 한다.

< 3. PC.A의 방화벽 설정 >
  위에서 포트 포워딩을 통해 외부 포트와 SSH의 기본 포트인 22를 연결해 주었어도, 닫혀있으면 의미가 없다.
  [제어판] -> [시스템 및 보안] -> [Windows Defender 방화벽] -> [고급 설정] -> [인바인드 규칙] -> [새 규칙]
  [포트] -> [특정 로컬 포트(22 입력)] -> 각 알맞게 계속 진행

< 4. VMware Ubuntu의 방화벽 설정 >
  Ubuntu는 기본적으로 ufw 방화벽을 사용한다.
    명령어 : sudo ufw allow <SSH 포트번호>/tcp 를 통해 포트를 열고
    명령어 : sudo ufw enable : 방화벽을 활성화한다.
    명령어 : sudo ufw disable : 방화벽을 비활성화한다.
    # 특정 포트 비활성화
        sudo ufw deny <포트번호>/tcp
    # 특정 포트 삭제
        sudo ufw delete deny <포트번호>/tcp

[ 만약, SSH의 기본 포트 22를 사용할 수 없다면?? ]
  PC.A에서 "/etc/ssh/" 경로에 있는 "sshd_config"를 원하는 편집기로 들어간다.
  주석으로 설정되어 있는 "Port 22"를 주석을 제거하고, 추가로 내가 원하는 포트가 있다면, Port [포트번호]를 작성하여 추가할 수 있다.

위와 같은 과정을 거치면 PC.B에서도 Putty를 이용해 PC.A에 있는 Ubuntu에 접속할 수 있게 된다.
